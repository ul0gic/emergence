# =============================================================================
# Emergence — Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values.
#   cp .env.example .env
#
# NEVER commit .env to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# PostgreSQL (Event Store / Cold State)
# -----------------------------------------------------------------------------
POSTGRES_DB=emergence
POSTGRES_USER=emergence
POSTGRES_PASSWORD=changeme
POSTGRES_PORT=5432

# Full connection string used by the World Engine and sqlx
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:${POSTGRES_PORT}/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# Dragonfly (Hot State — Redis-compatible)
# -----------------------------------------------------------------------------
DRAGONFLY_PORT=6379
DRAGONFLY_URL=redis://localhost:${DRAGONFLY_PORT}

# -----------------------------------------------------------------------------
# NATS (Event Bus / Messaging)
# -----------------------------------------------------------------------------
NATS_PORT=4222
NATS_MONITOR_PORT=8222
NATS_URL=nats://localhost:${NATS_PORT}

# -----------------------------------------------------------------------------
# LLM Backend — Default (routine agent decisions)
# -----------------------------------------------------------------------------
# Primary backend: OpenAI with cheap/fast models for cost-effective routine
# decisions (gathering, moving, resting). Choose the smallest model that
# produces valid JSON actions — nano/mini tier models are sufficient.
LLM_DEFAULT_BACKEND=openai
LLM_DEFAULT_API_URL=https://api.openai.com/v1
LLM_DEFAULT_API_KEY=
LLM_DEFAULT_MODEL=gpt-5-nano-2025-08-07

# -----------------------------------------------------------------------------
# LLM Backend — Escalation (complex decisions: discoveries, conflicts)
# -----------------------------------------------------------------------------
# Escalation backend: Anthropic for high-stakes decisions where nuance matters
# (social conflicts, discoveries, governance, diplomacy). Only invoked when
# tick complexity scoring exceeds the routine threshold.
LLM_ESCALATION_BACKEND=anthropic
LLM_ESCALATION_API_URL=https://api.anthropic.com/v1
LLM_ESCALATION_API_KEY=
LLM_ESCALATION_MODEL=claude-haiku-4-5-20251001

# -----------------------------------------------------------------------------
# Operator Controls
# -----------------------------------------------------------------------------
# Bearer token for authenticating operator REST API requests (pause, resume,
# speed control, event injection). Leave empty to disable auth (dev only).
OPERATOR_API_TOKEN=

# -----------------------------------------------------------------------------
# Observer Dashboard
# -----------------------------------------------------------------------------
OBSERVER_PORT=8080

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
RUST_LOG=info
